---
output: 
  pagedown::html_paged:
    css: www/styles_MIDN_pages.css
    toc: false
    numbered_sections: false
    number_sections: false

params:
  park: 'FRSP' #'RICH' #'PETE'
---
```{r results = 'hide', include = F}
knitr::opts_chunk$set(echo = FALSE, fig.align = 'center')
options(knitr.kable.NA = '')

library(pagedown)
library(htmltools)
library(tidyverse)
library(kableExtra)

midn_names <- read.csv("MIDN_MetaData.csv")
midn_params <- read.csv("MIDN_params.csv")
park <<- params$park
#park <<- park
from <<- as.numeric(midn_params$from[midn_params$park == park])
from_4yr <<- as.numeric(midn_params$from_4yr[midn_params$park == park])
to <<- as.numeric(midn_params$to[midn_params$park == park])
cycle_latest <<- as.numeric(midn_params$cycle_latest[midn_params$park == park])
from_prev <<- as.numeric(midn_params$from_prev[midn_params$park == park])
to_prev <<- as.numeric(midn_params$to_prev[midn_params$park == park])
QAQC <<- FALSE
locType <<- 'VS'

# park = 'FRSP' #'RICH' #'PETE'
# from = 2007
# from_4yr = 2021
# to = 2023
# cycle_latest = 5
# from_prev = 2016
# to_prev = 2019

park_long <- midn_names$LongName[midn_names$ParkCode == park]
park_title <- midn_names$LongName_title[midn_names$ParkCode == park]
```

```{r results = 'asis', include = F}
html_header <- HTML('
<div class="banner">
  <div class="header">
    <div id="col-left-header">
        <h5> Mid-Atlantic Network </h5>
        <h5> Inventory & Monitoring Division </h5>
        <br>
        <h5> Forest Monitoring Data Summary </h5></div>
    <div id="col-right-header">
        <img src="www/ah_small_flat_4c_blackbkgr_k100.svg" alt="arrowhead"></div>
    <div id="col-middle-header">
        <h5> National Park Service </h5>
        <h5> U.S. Department of the Interior </h5>
        <br>
        <h5>', park_title, '</h5><br></div></div></div><br>')

save_html(html_header, "html_header.html")
```


```{r results = 'asis'}
includeHTML("html_header.html")
```

```{r include = F}
cycle_labs <- c("1" = "Cycle 1: 2007 \u2013 2010",
                "2" = "Cycle 2: 2011 \u2013 2014",
                "3" = "Cycle 3: 2015 \u2013 2018",
                "4" = "Cycle 4: 2019 \u2013 2022",
                "5" = "Cycle 5: 2023")
```

```{r results = 'asis', echo = F}
cat("Table 1. Average plot-level seedling and sapling stem densities (stems per sq.m) and stocking index (per 2m radius microplot) by cycle. Only native, canopy-forming species are included. Note that Fraxinus spp. (ash species) are no longer considered canopy-forming species. ", paste0(cycle_labs, collapse = "; "), ". Plots are sampled in 4-year rotataions, with a quarter of the plots sampled each year (i.e. a panel). The stocking index quantifies whether current regeneration densities are sufficient to restock a forest canopy. The index is a weighted sum of seedling and sapling densities where larger seedling size classes get higher weights. Cells highlighted in green are plots that meet the minimum management target of 0.25 seedlings/m2 and 0.14 saplings/m2 or have a stocking index >100.", ifelse(length(cycle_labs) == 5, "Note that cycle 5 is only partially complete. ", ""), sep = "")
```
<br>

```{r echo = F, eval = T}
includeHTML("table1.html")
```

```{r results = 'asis'}
HTML(
"<style>
h4, .h4, h5, .h5, h6, .h6 {
margin-top: 0; 
margin-bottom: 0;
}
</style>"
)
```


```{r echo = F, eval = F, results = 'asis'}
tab1_h <- readLines(HTML("table1.html"))
cat(as.character(tab1_h[26:length(tab1_h) - 2])) # drops css causing issues
```
<br>
